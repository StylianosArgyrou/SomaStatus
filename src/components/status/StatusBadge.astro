---
import type { Status } from '../../lib/types';
import { STATUS_LABELS, COLORS } from '../../lib/constants';

interface Props {
  status: Status;
  size?: 'sm' | 'md';
}

const { status, size = 'sm' } = Astro.props;

const colorMap = {
  up: { dot: COLORS.up, bg: 'bg-green-500/10', text: 'text-green-400' },
  degraded: { dot: COLORS.degraded, bg: 'bg-yellow-500/10', text: 'text-yellow-400' },
  down: { dot: COLORS.down, bg: 'bg-red-500/10', text: 'text-red-400' },
};

const colors = colorMap[status];
const sizeClasses = size === 'sm'
  ? 'text-xs px-2 py-0.5 gap-1.5'
  : 'text-sm px-3 py-1 gap-2';
const dotSize = size === 'sm' ? 'w-1.5 h-1.5' : 'w-2 h-2';
---

<span class:list={['inline-flex items-center rounded-full font-medium', colors.bg, colors.text, sizeClasses]}>
  <span class:list={['rounded-full', dotSize]} style={`background-color: ${colors.dot}`}></span>
  {STATUS_LABELS[status]}
</span>
